<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reusability and composition | Vue.js in depth</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Vue.js training">
    <link rel="preload" href="/vuejs-training/assets/css/0.styles.12430312.css" as="style"><link rel="preload" href="/vuejs-training/assets/js/app.1f2ec0db.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/2.e1ee292e.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/32.13ed4f5f.js" as="script"><link rel="prefetch" href="/vuejs-training/assets/js/10.b012972f.js"><link rel="prefetch" href="/vuejs-training/assets/js/11.5baf958e.js"><link rel="prefetch" href="/vuejs-training/assets/js/12.3e89245e.js"><link rel="prefetch" href="/vuejs-training/assets/js/13.489799d5.js"><link rel="prefetch" href="/vuejs-training/assets/js/14.dfb9fd1e.js"><link rel="prefetch" href="/vuejs-training/assets/js/15.5cdc8756.js"><link rel="prefetch" href="/vuejs-training/assets/js/16.0e42bcf2.js"><link rel="prefetch" href="/vuejs-training/assets/js/17.9adf0e97.js"><link rel="prefetch" href="/vuejs-training/assets/js/18.a8e32e1e.js"><link rel="prefetch" href="/vuejs-training/assets/js/19.c490013c.js"><link rel="prefetch" href="/vuejs-training/assets/js/20.61f503a2.js"><link rel="prefetch" href="/vuejs-training/assets/js/21.6842c89f.js"><link rel="prefetch" href="/vuejs-training/assets/js/22.2a5f8dda.js"><link rel="prefetch" href="/vuejs-training/assets/js/23.fe31ee5c.js"><link rel="prefetch" href="/vuejs-training/assets/js/24.7cba55d5.js"><link rel="prefetch" href="/vuejs-training/assets/js/25.2730917e.js"><link rel="prefetch" href="/vuejs-training/assets/js/26.eaf326ab.js"><link rel="prefetch" href="/vuejs-training/assets/js/27.2d4d0781.js"><link rel="prefetch" href="/vuejs-training/assets/js/28.73a722c9.js"><link rel="prefetch" href="/vuejs-training/assets/js/29.e21f0c46.js"><link rel="prefetch" href="/vuejs-training/assets/js/3.146fd214.js"><link rel="prefetch" href="/vuejs-training/assets/js/30.6e773b2f.js"><link rel="prefetch" href="/vuejs-training/assets/js/31.28c3eca3.js"><link rel="prefetch" href="/vuejs-training/assets/js/33.057eaaad.js"><link rel="prefetch" href="/vuejs-training/assets/js/34.5c1c38bd.js"><link rel="prefetch" href="/vuejs-training/assets/js/4.51f90fb8.js"><link rel="prefetch" href="/vuejs-training/assets/js/5.4a8e7677.js"><link rel="prefetch" href="/vuejs-training/assets/js/6.71f975b1.js"><link rel="prefetch" href="/vuejs-training/assets/js/7.08c4fc6c.js"><link rel="prefetch" href="/vuejs-training/assets/js/8.8189065e.js"><link rel="prefetch" href="/vuejs-training/assets/js/9.e62db570.js">
    <link rel="stylesheet" href="/vuejs-training/assets/css/0.styles.12430312.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuejs-training/" class="home-link router-link-active"><!----> <span class="site-name">Vue.js in depth</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/reusability/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/" class="nav-link">
  Français
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/reusability/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/" class="nav-link">
  Français
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuejs-training/" aria-current="page" class="sidebar-link">Welcome</a></li><li><a href="/vuejs-training/presentation/" class="sidebar-link">Presentation of Vue.js</a></li><li><a href="/vuejs-training/tooling/" class="sidebar-link">Tooling</a></li><li><a href="/vuejs-training/views/" class="sidebar-link">Vue files</a></li><li><a href="/vuejs-training/directives/" class="sidebar-link">Directives</a></li><li><a href="/vuejs-training/components/" class="sidebar-link">Components</a></li><li><a href="/vuejs-training/reactivity/" class="sidebar-link">Reactivity</a></li><li><a href="/vuejs-training/state/" class="sidebar-link">State management</a></li><li><a href="/vuejs-training/routing/" class="sidebar-link">Routing</a></li><li><a href="/vuejs-training/http/" class="sidebar-link">HTTP Requests</a></li><li><a href="/vuejs-training/tests/" class="sidebar-link">Unit tests</a></li><li><a href="/vuejs-training/reusability/" aria-current="page" class="active sidebar-link">Reusability and composition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs-training/reusability/#mixins" class="sidebar-link">Mixins</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/reusability/#custom-directives" class="sidebar-link">Custom directives</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/reusability/#plugins" class="sidebar-link">Plugins</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/reusability/#composition-api" class="sidebar-link">Composition API</a></li></ul></li><li><a href="/vuejs-training/ecosystem/" class="sidebar-link">Vue Ecosystem</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reusability-and-composition"><a href="#reusability-and-composition" class="header-anchor">#</a> Reusability and composition</h1> <p>We are going to review the different tools provided by Vue when it comes to scaling up the application and reusing parts of logic and views accross the application.</p> <h2 id="mixins"><a href="#mixins" class="header-anchor">#</a> Mixins</h2> <p><a href="https://vuejs.org/v2/guide/mixins.html" target="_blank" rel="noopener noreferrer">Mixins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allow you to create reusable feature sets for your Vue components. By declaring them via the <code>mixins</code> option, all the options of the mixin will be merged (merge) within the component options.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// declare a mixin object</span>
<span class="token keyword">const</span> helloMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello from mixin!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// declare a component that uses this mixin</span>
<span class="token keyword">const</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>helloMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;another created callback&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If there is a name conflict between a mixin option and the component option, the merge strategy applied is as follows:</p> <ul><li><code>data</code>, <code>methods</code>, <code>components</code> &amp; <code>directives</code>: component options take precedence</li> <li>lifecycle hooks (eg <code>mounted</code>): triggered successively, mixin callbacks first</li></ul></div> <h2 id="custom-directives"><a href="#custom-directives" class="header-anchor">#</a> Custom directives</h2> <p>Vue allows you to declare your own <a href="https://vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener noreferrer">custom directives<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - the Vue-specific syntax that is used in component templates. This feature is often used by third-party libraries. Custom directives allow you to reuse business logic on multiple elements without using a dedicated component. However, be careful not to abuse them because it is difficult to keep track of all custom directives in a project, and they may conflict with future developments in Vue.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Register a global custom directive called 'v-focus'</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// When the bound element is inserted into the DOM...</span>
  <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Focus the element</span>
    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="plugins"><a href="#plugins" class="header-anchor">#</a> Plugins</h2> <p>Finally, Vue offers a <a href="https://vuejs.org/v2/guide/plugins.html" target="_blank" rel="noopener noreferrer">plugin system<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to add functionalities at a global level of the application. Again, this is a feature primarily used by third-party libraries and it should not be abused. Plugins can:</p> <ul><li>add global mixins or new globally declared components</li> <li>add methods or properties globally to all components</li> <li>add custom directives / filters / transitions</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> NotificationPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Notification'</span><span class="token punctuation">,</span> NotificationComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'notify'</span><span class="token punctuation">,</span> NotificationDirective<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>NotificationPlugin<span class="token punctuation">)</span>
</code></pre></div><p>Most third-party Vue libraries use this plugin format for its convenience. This is the case of <code>vue-router</code> for example. Plugins are recognized as such and placed in their own category on the Vue UI interface.</p> <h2 id="composition-api"><a href="#composition-api" class="header-anchor">#</a> Composition API</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This section covers a new feature in Vue 3.0</p></div> <p>With time, some components of an application can become very sophisticated and contain more and more data, methods, computed, watchers and other options. They should be split into smaller components whenever possible, but sometimes this is not enough. In this situation, separating the declaration of a method and some related data, for example, can become problematic; ideally, we would want to group together these options because they are part of the same business logic, and not split them by type (method, data etc.). Variables intended to be used together are found very far apart from each other and spread throughout the code of large, complex components.</p> <p>To overcome this problem, Vue 3 offers an alternative API to the component options object: the <strong>Composition API</strong>.</p> <p>Let's take this example that use the Options API you already know:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Clicked {{count}} {{label}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;time&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;times&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>This is how it can be rewritten using the Composition API:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Clicked {{count}} {{label}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;time&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;times&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Besides the fact that the code is smaller, you can observe the following changes:</p> <ul><li>with the special <code>setup</code> attribute of the <code>&lt;script&gt;</code>tag, data, computed, methods and other options can be declared anywhere in any order with the <code>export</code> keyword; no more need to group them by type</li> <li>the options are no longer attached to an object (<code>this.count</code>) but handled as independent variables; this involves declaring them via specific functions provided by Vue</li> <li>for data, it is necessary to encapsulate primitive values ​​such as the number <code>count</code> in an object structure in order to be able to modify them without changing their reference (mutation rather than reassignment); Vue proposes for this purpose the <code>ref</code> container which allows to mutate the primitive value via the <code>.value</code> property</li> <li>for objects used as data, they do not have this reassignment problem, and you can declare them with <code>reactive</code></li></ul> <p>In short, with the Options API, an object containing all the options grouped by type is exported by default, while with the Composition API, the different options are exported individually. The Composition API takes its name from the fact that you can move some of its options into separate files, which you will reuse and compose between your different components. This way, it can supplant mixins and plugins, which may therefore disappear in the future if this writing style is adopted massively by the community.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuejs-training/tests/" class="prev">
        Unit tests
      </a></span> <span class="next"><a href="/vuejs-training/ecosystem/">
        Vue Ecosystem
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuejs-training/assets/js/app.1f2ec0db.js" defer></script><script src="/vuejs-training/assets/js/2.e1ee292e.js" defer></script><script src="/vuejs-training/assets/js/32.13ed4f5f.js" defer></script>
  </body>
</html>
